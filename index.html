<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp Warmer - AI Powered</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <div class="logo-icon">AP</div>
                    <div class="logo-text-group">
                        <span class="logo-text">WA Warmer</span>
                        <span class="logo-subtext">by AP Devotion</span>
                    </div>
                </div>
            </div>

            <!-- Navigation Tabs -->
            <nav class="nav-tabs">
                <button class="tab-button active" data-tab="dashboard">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="7" height="7"></rect>
                            <rect x="14" y="3" width="7" height="7"></rect>
                            <rect x="14" y="14" width="7" height="7"></rect>
                            <rect x="3" y="14" width="7" height="7"></rect>
                        </svg>
                    </span>
                    Dashboard
                </button>
                <button class="tab-button" data-tab="account">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                            <circle cx="12" cy="7" r="4"></circle>
                        </svg>
                    </span>
                    Account
                </button>
                <button class="tab-button" data-tab="phone-numbers">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </span>
                    Phone Numbers
                </button>
                <button class="tab-button" data-tab="chat">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                        </svg>
                    </span>
                    Live Chat
                </button>
                <button class="tab-button" data-tab="warmer">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"></polygon>
                        </svg>
                    </span>
                    AI Warmer
                </button>
                <button class="tab-button" data-tab="media">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                            <polyline points="21 15 16 10 5 21"></polyline>
                        </svg>
                    </span>
                    Media
                </button>
                <button class="tab-button" data-tab="stickers">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="1"></circle>
                            <circle cx="19" cy="12" r="1"></circle>
                            <circle cx="5" cy="12" r="1"></circle>
                            <circle cx="12" cy="5" r="1"></circle>
                            <circle cx="12" cy="19" r="1"></circle>
                        </svg>
                    </span>
                    Stickers
                </button>
                <button class="tab-button" data-tab="blasting">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                            <path d="M21 3v5h-5"></path>
                            <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                            <path d="M8 16H3v5"></path>
                        </svg>
                    </span>
                    Blasting
                </button>
                <button class="tab-button" data-tab="settings">
                    <span class="tab-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                        </svg>
                    </span>
                    Settings
                </button>
            </nav>

            <div class="sidebar-footer">
                <div class="sidebar-stats">
                    <div class="sidebar-stat">
                        <span class="sidebar-stat-label">Status</span>
                        <span class="sidebar-stat-value" id="header-status">
                            <span class="status-badge status-inactive">Inactive</span>
                        </span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Main Wrapper -->
        <div class="main-wrapper">
            <!-- Header -->
            <header class="app-header">
                <div class="header-content">
                    <h1 class="header-title" id="current-page-title">Dashboard</h1>
                </div>
                <div class="header-stats">
                    <div class="stat-item">
                        <span class="stat-label">Account</span>
                        <span class="stat-value" id="header-account">Not Connected</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Numbers</span>
                        <span class="stat-value" id="header-phone-numbers">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Messages</span>
                        <span class="stat-value" id="header-messages">0</span>
                    </div>
                </div>
            </header>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Dashboard Tab -->
                <div class="tab-content active" id="dashboard-tab">
                    <div class="dashboard-grid">
                        <div class="dashboard-card">
                            <div class="card-content">
                                <h3>Warming Account</h3>
                                <div class="card-value" id="dash-account-status">Not Connected</div>
                                <div class="card-label">WhatsApp account status</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-content">
                                <h3>Target Numbers</h3>
                                <div class="card-value" id="dash-phone-numbers">0</div>
                                <div class="card-label">phone numbers added</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-content">
                                <h3>Messages Today</h3>
                                <div class="card-value" id="dash-messages-today">0</div>
                                <div class="card-label">AI-generated messages</div>
                            </div>
                        </div>

                        <div class="dashboard-card">
                            <div class="card-content">
                                <h3>AI Status</h3>
                                <div class="card-value" id="dash-ai-status">
                                    <span class="status-badge status-inactive" id="dash-ai-badge">Not Configured</span>
                                </div>
                                <div class="card-label" id="dash-ai-detail">Configure API key</div>
                            </div>
                        </div>
                    </div>

                    <div class="recent-activity">
                        <h2>Recent Activity</h2>
                        <div class="activity-log" id="activity-log">
                            <div class="activity-item">
                                <span class="activity-time">System</span>
                                <span class="activity-message">WhatsApp Warmer AI initialized</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Media Tab -->
                <div class="tab-content" id="media-tab">
                    <div class="tab-header">
                        <h2>Media Library</h2>
                        <button class="btn btn-primary" id="upload-media-btn">+ Upload Media</button>
                    </div>

                    <div class="info-banner-warning">
                        <span class="info-icon">‚ö†Ô∏è</span>
                        <span><strong>Context is mandatory!</strong> You must provide a description for each image. The AI uses this context to create natural conversations about the image.</span>
                    </div>

                    <div class="info-banner">
                        <span class="info-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                        </span>
                        <span>Upload images (JPG/PNG, max 5MB). AI will randomly send them at 10% frequency with context-based messages.</span>
                    </div>

                    <div class="media-items-container" id="media-items-container">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>

                <!-- Stickers Tab -->
                <div class="tab-content" id="stickers-tab">
                    <div class="tab-header">
                        <h2>Sticker Management</h2>
                        <button class="btn btn-primary" id="upload-sticker-btn">+ Upload Sticker</button>
                    </div>

                    <div class="info-banner">
                        <span class="info-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                        </span>
                        <span>Upload stickers in WebP format. AI will automatically choose appropriate stickers based on conversation context.</span>
                    </div>

                    <div class="sticker-categories-container" id="sticker-categories-container">
                        <!-- Will be populated dynamically -->
                    </div>
                </div>

                <!-- Blasting Tab -->
                <div class="tab-content" id="blasting-tab">
                    <div class="tab-header">
                        <h2>Message Blasting</h2>
                    </div>

                    <div class="info-banner">
                        <span class="info-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                        </span>
                        <span>Send an image with text to all targeted phone numbers. Messages will be sent with a 3-second interval between each recipient.</span>
                    </div>

                    <div class="blasting-container">
                        <div class="blasting-form-card">
                            <h3>Compose Blast Message</h3>

                            <div class="form-group">
                                <label for="blast-image-input">Upload Image (Optional)</label>
                                <div class="file-input-wrapper">
                                    <input type="file" id="blast-image-input" accept="image/jpeg,image/jpg,image/png" class="file-input">
                                    <label for="blast-image-input" class="file-input-label">
                                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                            <polyline points="21 15 16 10 5 21"></polyline>
                                        </svg>
                                        <span id="blast-file-name">Choose an image (JPG/PNG, max 5MB)</span>
                                    </label>
                                </div>
                                <div id="blast-image-preview" class="blast-image-preview"></div>
                            </div>

                            <div class="form-group">
                                <label for="blast-message-input">Message Text <span class="required">*</span></label>
                                <textarea
                                    id="blast-message-input"
                                    class="form-input"
                                    rows="6"
                                    placeholder="Enter your message here... (Required)"
                                    required></textarea>
                                <small class="char-count"><span id="blast-char-count">0</span> characters</small>
                            </div>

                            <div class="blast-preview-section" id="blast-preview-section" style="display: none;">
                                <h4>Preview</h4>
                                <div class="blast-preview-card">
                                    <div id="blast-preview-image"></div>
                                    <div class="blast-preview-message" id="blast-preview-message"></div>
                                </div>
                            </div>

                            <div class="blast-actions">
                                <button class="btn btn-secondary" id="preview-blast-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                        <circle cx="12" cy="12" r="3"></circle>
                                    </svg>
                                    Preview
                                </button>
                                <button class="btn btn-secondary" id="reset-blast-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                                        <path d="M21 8h-5V3"></path>
                                    </svg>
                                    Reset
                                </button>
                                <button class="btn btn-primary btn-blast" id="start-blast-btn">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"></path>
                                        <path d="M21 3v5h-5"></path>
                                        <path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"></path>
                                        <path d="M8 16H3v5"></path>
                                    </svg>
                                    Start Blast
                                </button>
                            </div>

                            <div id="blast-status" class="blast-status"></div>
                        </div>

                        <div class="blasting-stats-card">
                            <h3>Blast Statistics</h3>
                            <div class="stats-grid">
                                <div class="stat-item">
                                    <div class="stat-icon">üìä</div>
                                    <div class="stat-content">
                                        <span class="stat-label">Total Recipients</span>
                                        <span class="stat-value" id="blast-total-recipients">0</span>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-icon">‚úÖ</div>
                                    <div class="stat-content">
                                        <span class="stat-label">Messages Sent</span>
                                        <span class="stat-value" id="blast-sent-count">0</span>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-icon">‚è±Ô∏è</div>
                                    <div class="stat-content">
                                        <span class="stat-label">Est. Time</span>
                                        <span class="stat-value" id="blast-est-time">0s</span>
                                    </div>
                                </div>
                                <div class="stat-item">
                                    <div class="stat-icon">üìà</div>
                                    <div class="stat-content">
                                        <span class="stat-label">Progress</span>
                                        <span class="stat-value" id="blast-progress">0%</span>
                                    </div>
                                </div>
                            </div>

                            <div class="progress-bar-container" id="blast-progress-container" style="display: none;">
                                <div class="progress-bar" id="blast-progress-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-content" id="settings-tab">
                    <div class="settings-container">
                        <div class="settings-section">
                            <h3>Gemini AI API Key</h3>
                            <p class="settings-description">
                                Enter your Google Gemini AI API key to enable AI-powered conversations.
                                Get your API key from <a href="https://console.cloud.google.com/apis/credentials" target="_blank">Google Cloud Console</a>.
                            </p>

                            <div class="form-group">
                                <label for="api-key-input">API Key</label>
                                <div class="api-key-input-group">
                                    <input type="password" id="api-key-input" placeholder="Enter your Gemini API key" class="form-input">
                                    <button class="btn btn-small" id="toggle-api-key">Show</button>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button class="btn btn-primary" id="save-api-key-btn">Save API Key</button>
                                <button class="btn btn-secondary" id="test-api-key-btn">Test Connection</button>
                            </div>

                            <div class="api-status" id="api-status"></div>
                        </div>

                        <div class="settings-section">
                            <h3>AI Personality</h3>
                            <p class="settings-description">
                                Customize how the AI responds in conversations. This acts as the AI's personality and context.
                            </p>

                            <div class="form-group">
                                <label for="ai-personality-input">AI Personality & Instructions</label>
                                <textarea
                                    id="ai-personality-input"
                                    class="form-textarea"
                                    rows="6"
                                    placeholder="Describe how the AI should behave, what personality it should have, and any context it should know..."
                                ></textarea>
                                <small>This is used as the system prompt for the AI. The default personality is casual and friendly.</small>
                            </div>

                            <div class="form-actions">
                                <button class="btn btn-primary" id="save-ai-personality-btn">Save AI Personality</button>
                                <button class="btn btn-secondary" id="reset-ai-personality-btn">Reset to Default</button>
                            </div>

                            <div class="api-status" id="ai-personality-status"></div>
                        </div>

                        <div class="settings-section">
                            <h3>Response Delay</h3>
                            <p class="settings-description">
                                Set the delay range (in seconds) before the AI sends a response. This simulates natural human typing and response times.
                            </p>

                            <div class="delay-settings">
                                <div class="delay-input-group">
                                    <div class="form-group">
                                        <label for="delay-min-input">Minimum Delay (seconds)</label>
                                        <input type="number" id="delay-min-input" min="1" max="60" value="3" class="form-input">
                                    </div>
                                    <div class="delay-range-separator">to</div>
                                    <div class="form-group">
                                        <label for="delay-max-input">Maximum Delay (seconds)</label>
                                        <input type="number" id="delay-max-input" min="1" max="120" value="8" class="form-input">
                                    </div>
                                </div>
                                <small>The app will randomly choose a delay between these values before sending each response.</small>
                            </div>

                            <div class="form-actions">
                                <button class="btn btn-primary" id="save-delay-btn">Save Delay Settings</button>
                            </div>

                            <div class="api-status" id="delay-status"></div>
                        </div>

                        <div class="settings-section">
                            <h3>Typing Duration</h3>
                            <p class="settings-description">
                                Set how long the typing indicator is shown before sending a message. Must be less than or equal to the response delay.
                            </p>

                            <div class="delay-settings">
                                <div class="delay-input-group">
                                    <div class="form-group">
                                        <label for="typing-min-input">Minimum Duration (seconds)</label>
                                        <input type="number" id="typing-min-input" min="1" max="60" value="2" class="form-input">
                                    </div>
                                    <div class="delay-range-separator">to</div>
                                    <div class="form-group">
                                        <label for="typing-max-input">Maximum Duration (seconds)</label>
                                        <input type="number" id="typing-max-input" min="1" max="60" value="5" class="form-input">
                                    </div>
                                </div>
                                <small>The typing indicator will show for a random duration between these values. Cannot exceed response delay.</small>
                            </div>

                            <div class="form-actions">
                                <button class="btn btn-primary" id="save-typing-btn">Save Typing Settings</button>
                            </div>

                            <div class="api-status" id="typing-status"></div>
                        </div>

                        <div class="settings-section">
                            <h3>Sticker Settings</h3>
                            <p class="settings-description">
                                Configure AI-powered sticker sending. The AI will analyze conversation context to choose appropriate stickers.
                            </p>

                            <div class="form-group">
                                <label class="toggle-container">
                                    <span>Enable Sticker Sending</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="sticker-enabled-toggle" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </label>
                            </div>

                            <div class="form-group">
                                <label for="sticker-frequency-input">Sticker Frequency (% chance)</label>
                                <div class="frequency-slider-container">
                                    <input type="range" id="sticker-frequency-input" min="5" max="25" value="12" class="form-range">
                                    <span class="frequency-value" id="sticker-frequency-value">12%</span>
                                </div>
                                <small>Percentage chance to send a sticker instead of text (10-15% recommended)</small>
                            </div>

                            <div class="form-group">
                                <label class="toggle-container">
                                    <span>Fallback to Text</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="sticker-fallback-toggle" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </label>
                                <small>If enabled, sends text message when no appropriate sticker is available</small>
                            </div>

                            <div class="form-actions">
                                <button class="btn btn-primary" id="save-sticker-settings-btn">Save Sticker Settings</button>
                            </div>

                            <div class="api-status" id="sticker-status"></div>
                        </div>

                        <div class="settings-section">
                            <h3>Media Settings</h3>
                            <p class="settings-description">
                                Configure AI-powered media sending. The AI will use your provided context to create natural conversations about the images.
                            </p>

                            <div class="form-group">
                                <label class="toggle-container">
                                    <span>Enable Media Sending</span>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="media-enabled-toggle" checked>
                                        <span class="toggle-slider"></span>
                                    </label>
                                </label>
                            </div>

                            <div class="form-group">
                                <label for="media-frequency-input">Media Frequency (% chance)</label>
                                <div class="frequency-slider-container">
                                    <input type="range" id="media-frequency-input" min="1" max="30" value="10" class="form-range">
                                    <span class="frequency-value" id="media-frequency-value">10%</span>
                                </div>
                                <small>10% means approximately 1 in 10 responses will include a media item</small>
                            </div>

                            <div style="background: #eff6ff; border: 1px solid #bfdbfe; border-radius: 8px; padding: 15px; margin: 15px 0;">
                                <p style="margin: 0 0 10px 0; font-weight: 600; color: #1e40af;"><strong>How it works:</strong></p>
                                <ul style="margin: 0; padding-left: 20px;">
                                    <li style="color: #3b82f6; margin-bottom: 5px;">When responding to messages, there's a 10% chance to send an image</li>
                                    <li style="color: #3b82f6; margin-bottom: 5px;">AI uses the context you provided to create a natural message</li>
                                    <li style="color: #3b82f6; margin-bottom: 5px;">The image is sent along with the AI-generated caption</li>
                                    <li style="color: #3b82f6; margin-bottom: 5px;">If no media is sent, the AI falls back to stickers (12%) or text</li>
                                </ul>
                            </div>

                            <div class="form-actions">
                                <button class="btn btn-primary" id="save-media-settings-btn">Save Media Settings</button>
                            </div>

                            <div class="api-status" id="media-status"></div>
                        </div>
                    </div>
                </div>

                <!-- Account Tab -->
                <div class="tab-content" id="account-tab">
                    <div class="tab-header">
                        <h2>WhatsApp Warming Account</h2>
                        <button class="btn btn-primary" id="add-account-btn">+ Add Account</button>
                    </div>

                    <div class="info-banner">
                        <span class="info-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                        </span>
                        <span>Only one warming account is allowed. This account will send AI-generated messages to your target phone numbers.</span>
                    </div>

                    <div class="accounts-list" id="accounts-list">
                        <div class="empty-state">
                            <div class="empty-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                    <rect x="5" y="2" width="14" height="20" rx="2" ry="2"></rect>
                                    <line x1="12" y1="18" x2="12.01" y2="18"></line>
                                </svg>
                            </div>
                            <h3>No account added yet</h3>
                            <p>Click "Add Account" to connect your WhatsApp account</p>
                        </div>
                    </div>
                </div>

                <!-- Phone Numbers Tab -->
                <div class="tab-content" id="phone-numbers-tab">
                    <div class="tab-header">
                        <h2>Target Phone Numbers</h2>
                        <button class="btn btn-primary" id="add-phone-number-btn">+ Add Phone Number</button>
                    </div>

                    <div class="info-banner">
                        <span class="info-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                        </span>
                        <span>Add WhatsApp phone numbers that your warming account will chat with using AI.</span>
                    </div>

                    <div class="phone-numbers-list" id="phone-numbers-list">
                        <div class="empty-state">
                            <div class="empty-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="9" cy="7" r="4"></circle>
                                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                </svg>
                            </div>
                            <h3>No phone numbers added yet</h3>
                            <p>Click "Add Phone Number" to add target numbers</p>
                        </div>
                    </div>
                </div>

                <!-- Chat Tab -->
                <div class="tab-content" id="chat-tab">
                    <div class="tab-header">
                        <h2>Live Chat View</h2>
                        <div style="display: flex; gap: 10px;">
                            <button class="btn btn-secondary btn-small" id="load-demo-messages-btn">Load Demo</button>
                            <button class="btn btn-secondary btn-small" id="clear-demo-messages-btn" style="display: none;">Clear Demo</button>
                        </div>
                    </div>

                    <div class="info-banner">
                        <span class="info-icon">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="12" y1="16" x2="12" y2="12"></line>
                                <line x1="12" y1="8" x2="12.01" y2="8"></line>
                            </svg>
                        </span>
                        <span>Chats are automatically organized by phone number. Each conversation appears in its own segment.</span>
                    </div>

                    <div class="chat-segments-container" id="chat-segments-container">
                        <div class="empty-state">
                            <div class="empty-icon">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                                </svg>
                            </div>
                            <h3>No conversations yet</h3>
                            <p>Conversations will appear here when you start warming</p>
                        </div>
                    </div>
                </div>

                <!-- Warmer Tab -->
                <div class="tab-content" id="warmer-tab">
                    <div class="tab-header">
                        <h2>AI-Powered Warmer</h2>
                        <div class="warmer-status" id="warmer-status-indicator">
                            <span class="status-badge status-inactive">Inactive</span>
                        </div>
                    </div>

                    <div class="warmer-controls">
                        <div class="control-section">
                            <h3>How It Works</h3>
                            <div class="how-it-works">
                                <div class="step">
                                    <div class="step-number">1</div>
                                    <div class="step-content">
                                        <h4>AI Generates Greeting</h4>
                                        <p>Gemini AI creates a natural, friendly greeting message</p>
                                    </div>
                                </div>
                                <div class="step">
                                    <div class="step-number">2</div>
                                    <div class="step-content">
                                        <h4>Send to Numbers</h4>
                                        <p>Message is sent to all your target phone numbers</p>
                                    </div>
                                </div>
                                <div class="step">
                                    <div class="step-number">3</div>
                                    <div class="step-content">
                                        <h4>Detect Replies</h4>
                                        <p>App listens for responses from the recipients</p>
                                    </div>
                                </div>
                                <div class="step">
                                    <div class="step-number">4</div>
                                    <div class="step-content">
                                        <h4>AI Responds</h4>
                                        <p>AI generates contextual replies to keep conversation going</p>
                                    </div>
                                </div>
                            </div>

                            <div class="requirements-check" id="requirements-check">
                                <h4>Requirements</h4>
                                <div class="requirement-item">
                                    <span class="req-icon" id="req-account">-</span>
                                    <span>WhatsApp account connected</span>
                                </div>
                                <div class="requirement-item">
                                    <span class="req-icon" id="req-api">-</span>
                                    <span>Gemini API key configured</span>
                                </div>
                                <div class="requirement-item">
                                    <span class="req-icon" id="req-numbers">-</span>
                                    <span>At least one phone number added</span>
                                </div>
                            </div>

                            <div class="control-buttons">
                                <button class="btn btn-large btn-success" id="start-warming-btn">
                                    Start AI Warming
                                </button>
                                <button class="btn btn-large btn-danger" id="stop-warming-btn" style="display: none;">
                                    Stop Warming
                                </button>
                            </div>
                        </div>

                        <div class="control-section">
                            <h3>Warming Activity</h3>

                            <div class="warming-stats">
                                <div class="stat-box">
                                    <div class="stat-number" id="warming-messages-sent">0</div>
                                    <div class="stat-description">Messages sent this session</div>
                                </div>
                                <div class="stat-box">
                                    <div class="stat-number" id="warming-active-chats">0</div>
                                    <div class="stat-description">Active conversations</div>
                                </div>
                            </div>

                            <div class="warming-log-container">
                                <h4>Activity Log</h4>
                                <div class="warming-log" id="warming-log">
                                    <div class="log-item">Warming not started</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Add Account Modal -->
    <div class="modal" id="add-account-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add WhatsApp Account</h2>
                <button class="modal-close" id="close-account-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="account-form">
                    <div class="form-group">
                        <label for="account-name">Account Name</label>
                        <input type="text" id="account-name" placeholder="e.g., My Warming Account" class="form-input" autofocus>
                    </div>
                    <button class="btn btn-primary btn-block" id="generate-qr-btn">Generate QR Code</button>
                </div>

                <div id="qr-code-section" style="display: none;">
                    <div class="qr-instructions">
                        <h3>Scan QR Code with WhatsApp</h3>
                        <ol>
                            <li>Open WhatsApp on your phone</li>
                            <li>Tap Menu or Settings and select "Linked Devices"</li>
                            <li>Tap "Link a Device"</li>
                            <li>Point your phone at this screen to scan the code</li>
                        </ol>
                    </div>
                    <div class="qr-code-container">
                        <img id="qr-code-image" src="" alt="QR Code">
                        <div class="qr-loading">
                            <div class="spinner"></div>
                            <p>Waiting for QR code...</p>
                        </div>
                    </div>
                    <div class="qr-status" id="qr-status"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Phone Number Modal -->
    <div class="modal" id="add-phone-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add Phone Number</h2>
                <button class="modal-close" id="close-phone-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="phone-number-input">Phone Number (with country code)</label>
                    <input type="text" id="phone-number-input" placeholder="e.g., 60123456789" class="form-input" autofocus>
                    <small>Enter number without '+' or spaces (e.g., 60123456789 for Malaysia)</small>
                </div>
                <div class="form-group">
                    <label for="phone-name-input">Name (optional)</label>
                    <input type="text" id="phone-name-input" placeholder="e.g., Client A" class="form-input">
                </div>
                <button class="btn btn-primary btn-block" id="save-phone-number-btn">Add Phone Number</button>
            </div>
        </div>
    </div>

    <!-- Upload Sticker Modal -->
    <div class="modal" id="upload-sticker-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upload Sticker</h2>
                <button class="modal-close" id="close-sticker-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="sticker-category-select">Category</label>
                    <select id="sticker-category-select" class="form-input">
                        <option value="funny">Funny</option>
                        <option value="love">Love</option>
                        <option value="sad">Sad</option>
                        <option value="excited">Excited</option>
                        <option value="thumbs_up">Thumbs Up</option>
                        <option value="thinking">Thinking</option>
                        <option value="wow">Wow</option>
                        <option value="casual">Casual</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="sticker-file-input">Sticker File (WebP format)</label>
                    <input type="file" id="sticker-file-input" accept=".webp,image/webp" class="form-input">
                    <small>Only WebP format is supported for WhatsApp stickers</small>
                </div>
                <div class="sticker-preview" id="sticker-preview">
                    <!-- Preview will appear here -->
                </div>
                <button class="btn btn-primary btn-block" id="confirm-upload-sticker-btn">Upload Sticker</button>
            </div>
        </div>
    </div>

    <!-- Upload Media Modal -->
    <div class="modal" id="upload-media-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Upload Media</h2>
                <button class="modal-close" id="close-media-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="media-file-input">Select Image *</label>
                    <input type="file"
                           id="media-file-input"
                           accept="image/jpeg,image/jpg,image/png"
                           class="form-input">
                    <small>Supported formats: JPG, PNG (max 5MB)</small>
                </div>

                <div class="form-group">
                    <label for="media-context-input">Image Context/Description *</label>
                    <textarea
                        id="media-context-input"
                        class="form-input"
                        rows="4"
                        placeholder="Describe what's in the image. Be specific! e.g., 'Beautiful sunset at Santa Monica beach with orange and pink sky, taken last weekend'"
                        required></textarea>
                    <small style="display: block; margin-top: 8px; color: #6b7280;">
                        <strong style="color: #ef4444;">Required!</strong> The AI will use this description to create natural conversations about the image. Be detailed and descriptive (minimum 10 characters).
                    </small>
                </div>

                <div id="media-preview" class="sticker-preview"></div>

                <div id="upload-media-error" style="color: #ef4444; font-size: 14px; margin-top: 10px; padding: 10px; background: #fee2e2; border-radius: 6px; display: none;"></div>

                <button class="btn btn-primary btn-block" id="confirm-upload-media-btn">Upload Media</button>
            </div>
        </div>
    </div>

    <!-- Custom Dialog Modal -->
    <div class="modal" id="custom-dialog-modal">
        <div class="modal-content dialog-content">
            <div class="modal-header">
                <h2 id="dialog-title">Alert</h2>
                <button class="modal-close" id="close-dialog-modal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="dialog-message"></p>
                <input type="text" id="dialog-input" class="form-input" style="display: none; margin-top: 16px;">
            </div>
            <div class="modal-footer dialog-buttons">
                <button class="btn btn-secondary" id="dialog-cancel-btn" style="display: none;">Cancel</button>
                <button class="btn btn-primary" id="dialog-confirm-btn">OK</button>
            </div>
        </div>
    </div>

    <script src="renderer.js"></script>
</body>
</html>
